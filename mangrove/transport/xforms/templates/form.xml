<h:html xmlns="http://www.w3.org/2002/xforms" xmlns:h="http://www.w3.org/1999/xhtml"
        xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        xmlns:jr="http://openrosa.org/javarosa">
    <h:head>
        <h:title>{{ questionnaire.name }}</h:title>
        <model>
            <instance>
                <data>
                    {% for field in questionnaire.fields %}
                        <{{ field.code }}/>
                    {% endfor %}
                    <form_code>{{ questionnaire.form_code }}</form_code>
                </data>
            </instance>
            {% for field in questionnaire.fields %}
                <bind nodeset="/data/{{ field.code }}" type="{{ 'string' if field.type == 'text' else field.type}}" constraint="{{ field.xform_constraints() }}" required="{{ 'true()' if field.is_required() else 'false()'}}"/>
                <bind nodeset="/data/form_code" type="string">{{ questionnaire.form_code }}</bind>
            {% endfor %}
        </model>
    </h:head>
    <h:body>
    {% for field in questionnaire.fields %}
        {{ field_xmls.get(field.type).render(field=field) }}
    {% endfor %}
    </h:body>
</h:html>